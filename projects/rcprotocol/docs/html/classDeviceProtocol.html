<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rcProtocol: DeviceProtocol Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rcProtocol
   &#160;<span id="projectnumber">V.0.2.1</span>
   </div>
   <div id="projectbrief">A protocol for diy transmitters/receivers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classDeviceProtocol-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DeviceProtocol Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="rcDeviceProtocol_8h_source.html">rcDeviceProtocol.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for DeviceProtocol:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classDeviceProtocol.png" usemap="#DeviceProtocol_map" alt=""/>
  <map id="DeviceProtocol_map" name="DeviceProtocol_map">
<area href="classRCGlobal.html" alt="RCGlobal" shape="rect" coords="0,0,99,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1d33bbf35f5c6e7bb888eb06fc50c070"><td class="memItemLeft" align="right" valign="top">typedef void()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#a1d33bbf35f5c6e7bb888eb06fc50c070">saveRemoteID</a>(const uint8_t *id)</td></tr>
<tr class="separator:a1d33bbf35f5c6e7bb888eb06fc50c070"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab81f811050405c0bc4b2c1e6b77f2b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#aab81f811050405c0bc4b2c1e6b77f2b1">DeviceProtocol</a> (RF24 *tranceiver, const uint8_t deviceId[])</td></tr>
<tr class="separator:aab81f811050405c0bc4b2c1e6b77f2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ee16439248ac681272017861d04f61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#a78ee16439248ac681272017861d04f61">begin</a> (<a class="el" href="classRCSettings.html">RCSettings</a> *settings)</td></tr>
<tr class="separator:a78ee16439248ac681272017861d04f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6d598d72c46cfbc99cb9f8bcb301f7"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#aed6d598d72c46cfbc99cb9f8bcb301f7">pair</a> (<a class="el" href="classDeviceProtocol.html#a1d33bbf35f5c6e7bb888eb06fc50c070">saveRemoteID</a> <a class="el" href="classDeviceProtocol.html#a1d33bbf35f5c6e7bb888eb06fc50c070">saveRemoteID</a>)</td></tr>
<tr class="separator:aed6d598d72c46cfbc99cb9f8bcb301f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0850a49dfc2a98c34e40a8f4be1ae6cc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#a0850a49dfc2a98c34e40a8f4be1ae6cc">isConnected</a> ()</td></tr>
<tr class="separator:a0850a49dfc2a98c34e40a8f4be1ae6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a099b7b72a19262ab5ff19a41c9ce0a9e"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#a099b7b72a19262ab5ff19a41c9ce0a9e">connect</a> (uint8_t remoteId[])</td></tr>
<tr class="separator:a099b7b72a19262ab5ff19a41c9ce0a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19501f2313a78c880f6293ebbc09fdfa"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDeviceProtocol.html#a19501f2313a78c880f6293ebbc09fdfa">update</a> (uint16_t channels[], uint8_t telemetry[])</td></tr>
<tr class="separator:a19501f2313a78c880f6293ebbc09fdfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Communication Protocol for receivers </p>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8h_source.html#l00027">27</a> of file <a class="el" href="rcDeviceProtocol_8h_source.html">rcDeviceProtocol.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a1d33bbf35f5c6e7bb888eb06fc50c070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d33bbf35f5c6e7bb888eb06fc50c070">&#9670;&nbsp;</a></span>saveRemoteID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void() DeviceProtocol::saveRemoteID(const uint8_t *id)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Save the transmitter id to non-volitile memory.</p>
<p>Very simple, all that needs to be done, is to save the Id to memory, so that when the receiver tries to connect, it will know which id to request to connect with.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>5 byte char array </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8h_source.html#l00038">38</a> of file <a class="el" href="rcDeviceProtocol_8h_source.html">rcDeviceProtocol.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aab81f811050405c0bc4b2c1e6b77f2b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab81f811050405c0bc4b2c1e6b77f2b1">&#9670;&nbsp;</a></span>DeviceProtocol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DeviceProtocol::DeviceProtocol </td>
          <td>(</td>
          <td class="paramtype">RF24 *&#160;</td>
          <td class="paramname"><em>tranceiver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>deviceId</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor</p>
<p>Creates a new instance of the protocol. You create an instance and send a reference to the RF24 driver as well as the id of the remote</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tranceiver</td><td>A reference to the RF24 chip, this allows you to create your own instance, allowing multi-platform support </td></tr>
    <tr><td class="paramname">deviceId</td><td>The 5 byte char array of the receiver's ID: ex "MyRcr" </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8cpp_source.html#l00006">6</a> of file <a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a78ee16439248ac681272017861d04f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ee16439248ac681272017861d04f61">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DeviceProtocol::begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRCSettings.html">RCSettings</a> *&#160;</td>
          <td class="paramname"><em>settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Begin the Protocol</p>
<dl class="section note"><dt>Note</dt><dd>There is no need to begin the RF24 driver, as this function already does this for you</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">settings</td><td><a class="el" href="classRCSettings.html">RCSettings</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8cpp_source.html#l00018">18</a> of file <a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a>.</p>

</div>
</div>
<a id="aed6d598d72c46cfbc99cb9f8bcb301f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6d598d72c46cfbc99cb9f8bcb301f7">&#9670;&nbsp;</a></span>pair()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t DeviceProtocol::pair </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDeviceProtocol.html#a1d33bbf35f5c6e7bb888eb06fc50c070">DeviceProtocol::saveRemoteID</a>&#160;</td>
          <td class="paramname"><em>saveRemoteID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to pair with a transmitter</p>
<dl class="section note"><dt>Note</dt><dd>The transmitter you are trying to pair with should also be in pair mode</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">saveRemoteID</td><td>A function pointer to save the id of the transmitter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#af92a9c3cdac1e39c59ff0b4bea76b831">RC_ERROR_TIMEOUT</a> if no transmitter was found. </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#a731ce428ac516139e9956858bb39d35b">RC_ERROR_LOST_CONNECTION</a> if transmitter stopped replying </dd></dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8cpp_source.html#l00025">25</a> of file <a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a>.</p>

</div>
</div>
<a id="a0850a49dfc2a98c34e40a8f4be1ae6cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0850a49dfc2a98c34e40a8f4be1ae6cc">&#9670;&nbsp;</a></span>isConnected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DeviceProtocol::isConnected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if the receiver is connected with a transmitter.</p>
<dl class="section return"><dt>Returns</dt><dd>true when connected. </dd></dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8cpp_source.html#l00191">191</a> of file <a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a>.</p>

</div>
</div>
<a id="a099b7b72a19262ab5ff19a41c9ce0a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a099b7b72a19262ab5ff19a41c9ce0a9e">&#9670;&nbsp;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t DeviceProtocol::connect </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>remoteId</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempt to pair with a transmitter</p>
<dl class="section note"><dt>Note</dt><dd>The transmitter you are trying to connect with should also be in connect mode, as well as paired with this device</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">remoteId</td><td>a 5 byte char array of the remote you are trying to pair with, this should come from <a class="el" href="classDeviceProtocol.html#a1d33bbf35f5c6e7bb888eb06fc50c070">DeviceProtocol::saveRemoteID</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#af92a9c3cdac1e39c59ff0b4bea76b831">RC_ERROR_TIMEOUT</a> if no transmitter was found </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#a731ce428ac516139e9956858bb39d35b">RC_ERROR_LOST_CONNECTION</a> if transmitter stopped replying </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#a553492d75e659619528b25c13060ab65">RC_ERROR_CONNECTION_REFUSED</a> if the transmitter refused to connect </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#a8ace11b378f3e28814fc1c089dc4b516">RC_ERROR_BAD_DATA</a> if the settings are not properly set, or the transmitter sent unexpected data </dd></dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8cpp_source.html#l00079">79</a> of file <a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a>.</p>

</div>
</div>
<a id="a19501f2313a78c880f6293ebbc09fdfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19501f2313a78c880f6293ebbc09fdfa">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t DeviceProtocol::update </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>channels</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>telemetry</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update the communications with the currently connected device</p>
<p>If there was a packet sent, it will process it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channels</td><td><a class="el" href="classRCSettings.html#a651a8388732483ad29b1fdf03ab066f3">RCSettings.setNumChannels()</a> size array that is set when a standard packet is received. </td></tr>
    <tr><td class="paramname">telemetry</td><td><a class="el" href="classRCSettings.html#a11ad2922d2de9e69711ad643bdd7db3b">RCSettings.setPayloadSize()</a> size array of telemetry data to send to the transmitter</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if channels were updated </dd>
<dd>
0 if nothing happened </dd>
<dd>
<a class="el" href="rcGlobal_8h.html#a20eddd07f1bb69f53a6ee7645eece37a">RC_ERROR_NOT_CONNECTED</a> if not connected </dd></dl>

<p class="definition">Definition at line <a class="el" href="rcDeviceProtocol_8cpp_source.html#l00221">221</a> of file <a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="rcDeviceProtocol_8h_source.html">rcDeviceProtocol.h</a></li>
<li>src/<a class="el" href="rcDeviceProtocol_8cpp_source.html">rcDeviceProtocol.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 1 2018 16:03:30 for rcProtocol by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
